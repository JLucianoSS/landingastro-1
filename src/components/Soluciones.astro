---
import SolucionModal from './SolucionModal.astro';
import { solucionesData } from '../data/soluciones';

// Mapeo de IDs de las cards a los datos
const cardDataMap = {
  'conectividad-avanzada': solucionesData[0],
  'cloud-plataformas-digitales': solucionesData[1], 
  'data-center': solucionesData[2],
  'gobierno-riesgo-cumplimiento': solucionesData[3],
  'confianza-digital-identidades': solucionesData[4],
  'proteccion-avanzada-amenazas': solucionesData[5],
  'tecnologias-nueva-generacion': solucionesData[6],
  'proteccion-experiencia-digital': solucionesData[7]
};
---

<section
  id="soluciones"
  class="pt-20 bg-gradient-to-br from-slate-50 via-white to-blue-50 relative overflow-hidden"
>
  <div class="container mx-auto px-4">
    <!-- T√≠tulo y subt√≠tulo de la secci√≥n -->
    <div class="text-center md:mb-40">
      <h2
        class="soluciones-titulo font-stolzl text-3xl md:text-4xl md:text-5xl font-bold bg-gradient-to-r from-[#050835] to-[#3b4ef7] bg-clip-text text-transparent mb-6"
      >
        Ecosistema de Soluciones
      </h2>
      <p
        class="soluciones-subtitulo text-lg md:text-xl text-dark/70 max-w-3xl mx-auto leading-relaxed"
      >
        Conectamos todas las piezas de tu transformaci√≥n digital donde creamos
        valor a trav√©s de soluciones integradas que potencian el crecimiento de
        tu organizaci√≥n
      </p>
    </div>
    <div class="ecosystem-wrapper relative w-full max-w-6xl mx-auto h-[700px] mt-[-30px] lg:mt-[-80px]">
      <!-- Part√≠culas de fondo -->
      <div
        class="bg-particle absolute w-1 h-1 bg-secondary/20 rounded-full"
        style="top: 10%; left: 15%;"
      >
      </div>
      <div
        class="bg-particle absolute w-1 h-1 bg-secondary/20 rounded-full"
        style="top: 20%; right: 20%;"
      >
      </div>
      <div
        class="bg-particle absolute w-1 h-1 bg-secondary/20 rounded-full"
        style="bottom: 30%; left: 25%;"
      >
      </div>
      <div
        class="bg-particle absolute w-1 h-1 bg-secondary/20 rounded-full"
        style="bottom: 15%; right: 30%;"
      >
      </div>
      <div
        class="bg-particle absolute w-2 h-2 rounded-full"
        style="top: 45%; left: 35%; background-color: #051CCE;"
      >
      </div>
      <div
        class="bg-particle absolute w-2 h-2 rounded-full"
        style="top: 55%; right: 35%; background-color: #051CCE;"
      >
      </div>
      <div
        class="bg-particle absolute w-2 h-2 rounded-full"
        style="top: 50%; left: 40%; background-color: #051CCE;"
      >
      </div>
      <div
        class="bg-particle absolute w-2 h-2 rounded-full"
        style="top: 60%; right: 40%; background-color: #051CCE;"
      >
      </div>

      <!-- SVG para l√≠neas de conexi√≥n -->
      <svg
        class="hidden md:flex connection-svg absolute inset-0 w-full h-full pointer-events-none z-10"
        viewBox="0 0 800 600"
      >
        <defs>
          <linearGradient id="lineGradient" x1="0%" y1="0%" x2="100%" y2="0%">
            <stop offset="0%" style="stop-color:#e2e8f0;stop-opacity:1"></stop>
            <stop offset="100%" style="stop-color:#062BED;stop-opacity:0.8"
            ></stop>
          </linearGradient>
        </defs>

        <!-- L√≠neas que llegan EXACTAMENTE a cada card - SIM√âTRICAS -->
        <!-- Seguridad -> Centro (arriba) -->
        <path
          class="connection-line line-1"
          d="M400 80 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- Cloud -> Centro (arriba derecha) - 45 grados -->
        <path
          class="connection-line line-2"
          d="M520 140 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- IA/ML -> Centro (abajo derecha) - 45 grados -->
        <path
          class="connection-line line-3"
          d="M520 360 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- DevOps -> Centro (abajo) -->
        <path
          class="connection-line line-4"
          d="M400 480 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- Data -> Centro (abajo izquierda) - 45 grados -->
        <path
          class="connection-line line-5"
          d="M280 360 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- IoT -> Centro (arriba izquierda) - 45 grados -->
        <path
          class="connection-line line-6"
          d="M280 140 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- Protecci√≥n Avanzada -> Centro (derecha) -->
        <path
          class="connection-line line-7"
          d="M620 250 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- Tecnolog√≠as Nueva Generaci√≥n -> Centro (izquierda) -->
        <path
          class="connection-line line-8"
          d="M180 250 L400 250"
          stroke="#e2e8f0"
          stroke-width="2"
          fill="none"></path>

        <!-- Punto central (enchufe) -->
        <circle
          class="connection-dot center-dot"
          cx="400"
          cy="250"
          r="6"
          fill="#062BED"></circle>

        <!-- Puntos de conexi√≥n -->
        <circle
          class="connection-dot dot-1"
          cx="400"
          cy="80"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-2"
          cx="580"
          cy="140"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-3"
          cx="580"
          cy="360"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-4"
          cx="400"
          cy="480"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-5"
          cx="220"
          cy="360"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-6"
          cx="220"
          cy="140"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-7"
          cx="620"
          cy="250"
          r="4"
          fill="#e2e8f0"></circle>
        <circle
          class="connection-dot dot-8"
          cx="180"
          cy="250"
          r="4"
          fill="#e2e8f0"></circle>
      </svg>

      <!-- Card central con logo - Dise√±o profesional -->
      <div
        class="center-card absolute md:top-[42%] md:left-[50%] top-[50%] left-[50%] w-32 h-32 md:w-40 md:h-40 bg-[#050835]/90 backdrop-blur-md rounded-full flex items-center justify-center z-20 shadow-lg border border-white/30"
        style="transform: translate(-50%, -50%);"
      >
        <div class="text-center">
          <!-- Logo Imperia -->
          <img
            src="/images/logo-hero.png"
            alt="Imperia"
            class="w-20 h-8 md:w-32 md:h-16 mx-auto object-contain"
          />
        </div>
      </div>

      <!-- Tarjetas de soluciones - Mejor alineamiento del texto -->
      <!-- 1. Protecci√≥n de la Experiencia Digital (arriba centro) -->
      <div
        class="solution-card card-1 bg-[#062BED]"
        data-connection="1"
        data-solucion-id="proteccion-experiencia-digital"
        onclick="openModal('proteccion-experiencia-digital')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/proteccion-experiencia.png"
              alt="Protecci√≥n de la Experiencia Digital"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Protecci√≥n de la Experiencia Digital
          </h4>
        </div>
      </div>

      <!-- 2. Conectividad Avanzada (arriba derecha) -->
      <div
        class="solution-card card-2 bg-[#062BED]"
        data-connection="2"
        data-solucion-id="conectividad-avanzada"
        onclick="openModal('conectividad-avanzada')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/conectividad-avanzada.png"
              alt="Conectividad Avanzada"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">Conectividad Avanzada</h4>
        </div>
      </div>

      <!-- 3. Cloud & Plataformas Digitales (abajo derecha) -->
      <div
        class="solution-card card-3 bg-[#062BED]"
        data-connection="3"
        data-solucion-id="cloud-plataformas-digitales"
        onclick="openModal('cloud-plataformas-digitales')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/cloud-plat.png"
              alt="Cloud & Plataformas Digitales"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Cloud & Plataformas Digitales
          </h4>
        </div>
      </div>

      <!-- 4. Data Center (abajo centro) -->
      <div
        class="solution-card card-4 bg-[#062BED]"
        data-connection="4"
        data-solucion-id="data-center"
        onclick="openModal('data-center')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/data-center.png"
              alt="Data Center"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">Data Center</h4>
        </div>
      </div>

      <!-- 5. Gobierno, Riesgo y Cumplimiento (abajo izquierda) -->
      <div
        class="solution-card card-5 bg-[#062BED]"
        data-connection="5"
        data-solucion-id="gobierno-riesgo-cumplimiento"
        onclick="openModal('gobierno-riesgo-cumplimiento')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/gob-riesgo-cum.png"
              alt="Gobierno, Riesgo y Cumplimiento"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Gobierno, Riesgo y Cumplimiento
          </h4>
        </div>
      </div>

      <!-- 6. Confianza Digital y Protecci√≥n de Identidades (arriba izquierda) -->
      <div
        class="solution-card card-6 bg-[#062BED]"
        data-connection="6"
        data-solucion-id="confianza-digital-identidades"
        onclick="openModal('confianza-digital-identidades')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/confianza-digital.png"
              alt="Confianza Digital y Protecci√≥n de Identidades"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Confianza Digital y Protecci√≥n de Identidades
          </h4>
        </div>
      </div>

      <!-- 7. Protecci√≥n Avanzada Contra Amenazas (derecha centro) -->
      <div
        class="solution-card card-7 bg-[#062BED]"
        data-connection="7"
        data-solucion-id="proteccion-avanzada-amenazas"
        onclick="openModal('proteccion-avanzada-amenazas')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/proteccion-avanzada-amenazas.png"
              alt="Protecci√≥n Avanzada Contra Amenazas"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Protecci√≥n Avanzada Contra Amenazas
          </h4>
        </div>
      </div>

      <!-- 8. Tecnolog√≠as de Nueva Generaci√≥n (izquierda centro) -->
      <div
        class="solution-card card-8 bg-[#062BED]"
        data-connection="8"
        data-solucion-id="tecnologias-nueva-generacion"
        onclick="openModal('tecnologias-nueva-generacion')"
      >
        <div class="flex flex-col items-center text-center px-4">
          <div class="mb-2">
            <img
              src="/images/soluciones/tec-nueva-generacion.png"
              alt="Tecnolog√≠as de Nueva Generaci√≥n"
              class="w-12 h-12 object-contain filter brightness-0 invert"
            />
          </div>
          <h4 class="font-bold text-white text-sm leading-tight drop-shadow-lg">
            Tecnolog√≠as de Nueva Generaci√≥n
          </h4>
        </div>
      </div>
    </div>
  </div>

  <!-- Modales para cada soluci√≥n -->
  {Object.entries(cardDataMap).map(([id, data]) => (
    <SolucionModal
      id={data.id}
      title={data.title}
      description={data.description}
      features={data.features}
      highlightedFeatures={data.highlightedFeatures}
      icon={data.icon}
      isOpen={false}
    />
  ))}
</section>

<script>
  // üåê ECOSISTEMA DE SOLUCIONES CON ANIMACIONES DE ENTRADA
  document.addEventListener("DOMContentLoaded", function () {
    console.log("üåê Ecosistema de Soluciones iniciado");

    // Funci√≥n para abrir modal - Disponible globalmente
    (window as any).openModal = function(modalId: string) {
      const modal = document.getElementById('modal-' + modalId);
      if (modal) {
        modal.classList.add('modal-open');
        document.body.style.overflow = 'hidden';
        
        // Animaci√≥n de entrada
        const modalContent = modal.querySelector('.modal-container') as HTMLElement;
        if (modalContent) {
          modalContent.style.transform = 'scale(0.8) translateY(50px)';
          modalContent.style.opacity = '0';
          
          setTimeout(function() {
            modalContent.style.transition = 'all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
            modalContent.style.transform = 'scale(1) translateY(0)';
            modalContent.style.opacity = '1';
          }, 10);
        }
      }
    };

    // Funci√≥n para cerrar modal - Disponible globalmente
    (window as any).closeModal = function(modalId: string) {
      const modal = document.getElementById('modal-' + modalId);
      if (modal) {
        const modalContent = modal.querySelector('.modal-container') as HTMLElement;
        if (modalContent) {
          modalContent.style.transition = 'all 0.2s ease-in';
          modalContent.style.transform = 'scale(0.8) translateY(50px)';
          modalContent.style.opacity = '0';
        }
        
        setTimeout(function() {
          modal.classList.remove('modal-open');
          document.body.style.overflow = '';
        }, 200);
      }
    };

    // Animaciones de entrada para t√≠tulo y subt√≠tulo
    if (typeof (window as any).gsap !== "undefined" && (window as any).gsapReady) {
      // Animaci√≥n del t√≠tulo
      (window as any).gsap.fromTo(
        ".soluciones-titulo",
        {
          opacity: 0,
          y: 50,
          scale: 0.9,
        },
        {
          opacity: 1,
          y: 0,
          scale: 1,
          duration: 1,
          ease: "power3.out",
          scrollTrigger: {
            trigger: ".soluciones-titulo",
            start: "top 85%",
            end: "bottom 15%",
            toggleActions: "play none none reverse",
            once: true,
          },
        }
      );

      // Animaci√≥n del subt√≠tulo
      (window as any).gsap.fromTo(
        ".soluciones-subtitulo",
        {
          opacity: 0,
          y: 30,
        },
        {
          opacity: 1,
          y: 0,
          duration: 0.8,
          ease: "power2.out",
          scrollTrigger: {
            trigger: ".soluciones-subtitulo",
            start: "top 85%",
            end: "bottom 15%",
            toggleActions: "play none none reverse",
            once: true,
          },
        }
      );
    }

    // Elementos para animaci√≥n
    const cards = document.querySelectorAll(
      ".solution-card"
    ) as NodeListOf<HTMLElement>;
    const connectionLines = document.querySelectorAll(
      ".connection-line"
    ) as NodeListOf<SVGPathElement>;
    const connectionDots = document.querySelectorAll(
      ".connection-dot"
    ) as NodeListOf<SVGCircleElement>;
    const particles = document.querySelectorAll(
      ".bg-particle"
    ) as NodeListOf<HTMLElement>;
    const centerCard = document.querySelector(".center-card") as HTMLElement;
    const section = document.getElementById("soluciones");

    // Estado de animaci√≥n
    let animationsActivated = false;

    // Funci√≥n para verificar si elemento est√° en viewport - Mejorada para mobile
    function isInViewport(element) {
      const rect = element.getBoundingClientRect();
      const windowHeight =
        window.innerHeight || document.documentElement.clientHeight;
      // Ajuste para mobile: usar un threshold m√°s conservador
      const threshold = window.innerWidth <= 768 ? 0.9 : 0.8;
      return rect.top < windowHeight * threshold && rect.bottom > 0;
    }

    // Funci√≥n para activar animaciones de entrada
    function activateEntryAnimations() {
      if (animationsActivated) return;

      console.log("üéØ ¬°SECCI√ìN SOLUCIONES DETECTADA! Activando ecosistema...");
      animationsActivated = true;

      // Animaci√≥n del c√≠rculo central
      centerCard.style.opacity = "0";
      centerCard.style.transform = "translate(-50%, -50%) scale(0.5)";

      setTimeout(() => {
        centerCard.style.transition =
          "all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
        centerCard.style.opacity = "1";
        centerCard.style.transform = "translate(-50%, -50%) scale(1)";
      }, 100);

      // Animaci√≥n de las cards con stagger elegante
      cards.forEach((card, index) => {
        card.style.opacity = "0";
        card.style.transform = "scale(0.8) translateY(30px) rotate(10deg)";

        setTimeout(
          () => {
            card.style.transition =
              "all 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)";
            card.style.opacity = "1";
            card.style.transform = "scale(1) translateY(0) rotate(0deg)";
            console.log(`‚úÖ Card ${index + 1} animada`);
          },
          300 + index * 200
        );
      });

      // Animaci√≥n de las l√≠neas con efecto avanzado
      setTimeout(() => {
        connectionLines.forEach((line, index) => {
          line.style.opacity = "0";
          line.style.strokeDasharray = "500";
          line.style.strokeDashoffset = "500";

          setTimeout(
            () => {
              line.style.transition =
                "all 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)";
              line.style.opacity = "1";
              line.style.strokeDashoffset = "0";
              line.classList.add("visible");
              console.log(`‚ú® L√≠nea ${index + 1} con animaci√≥n avanzada`);
            },
            800 + index * 150
          );
        });
      }, 600);

      // Animaci√≥n de los puntos de conexi√≥n
      setTimeout(() => {
        connectionDots.forEach((dot, index) => {
          dot.style.opacity = "0";
          dot.style.transform = "scale(0)";

          setTimeout(
            () => {
              dot.style.transition =
                "all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55)";
              dot.style.opacity = "1";
              dot.style.transform = "scale(1)";
              dot.classList.add("visible");
              console.log(`üîó Punto ${index + 1} conectado`);
            },
            1000 + index * 100
          );
        });
      }, 800);

      // Animaci√≥n de las part√≠culas
      particles.forEach((particle, index) => {
        particle.style.opacity = "0";
        particle.style.transform = "scale(0)";

        setTimeout(
          () => {
            particle.style.transition = "all 0.8s ease-out";
            particle.style.opacity = "1";
            particle.style.transform = "scale(1)";
          },
          1200 + index * 100
        );
      });
    }

    // Verificar al hacer scroll
    function checkScroll() {
      if (section && isInViewport(section)) {
        activateEntryAnimations();
      }
    }

    // Event listeners
    window.addEventListener("scroll", checkScroll);

    // Verificar al cargar la p√°gina
    if (section && isInViewport(section)) {
      activateEntryAnimations();
    }

    // Fallback CSS para t√≠tulo y subt√≠tulo
    function checkAndAnimateTitles() {
      const titulo = document.querySelector(".soluciones-titulo");
      const subtitulo = document.querySelector(".soluciones-subtitulo");

      if (titulo && subtitulo && !titulo.classList.contains("animate")) {
        if (isInViewport(titulo)) {
          setTimeout(() => {
            titulo.classList.add("animate");
          }, 100);

          setTimeout(() => {
            subtitulo.classList.add("animate");
          }, 300);
        }
      }
    }

    // Verificar t√≠tulos al hacer scroll
    window.addEventListener("scroll", checkAndAnimateTitles);
    checkAndAnimateTitles();

    // Efectos hover con GSAP (si est√° disponible)
    if (typeof (window as any).gsap !== "undefined") {
      // Efectos hover para las tarjetas
      cards.forEach((card, index) => {
        const connectionIndex = index + 1;

        card.addEventListener("mouseenter", () => {
          // Escalar tarjeta
          (window as any).gsap.to(card, {
            scale: 1.08,
            duration: 0.4,
            ease: "power2.out",
          });

          // Efecto de electricidad en la l√≠nea de esta card
          (window as any).gsap.to(`.line-${connectionIndex}`, {
            stroke: "#062BED",
            strokeWidth: 4,
            duration: 0.3,
          });

          // Efecto en el punto de conexi√≥n
          (window as any).gsap.to(`.dot-${connectionIndex}`, {
            fill: "#062BED",
            r: 8,
            duration: 0.3,
          });
        });

        card.addEventListener("mouseleave", () => {
          // Restaurar tarjeta
          (window as any).gsap.to(card, {
            scale: 1,
            duration: 0.4,
            ease: "power2.out",
          });

          // Restaurar la l√≠nea de esta card
          (window as any).gsap.to(`.line-${connectionIndex}`, {
            stroke: "#e2e8f0",
            strokeWidth: 2,
            duration: 0.3,
          });

          // Restaurar punto
          (window as any).gsap.to(`.dot-${connectionIndex}`, {
            fill: "#e2e8f0",
            r: 4,
            duration: 0.3,
          });
        });
      });
    }

    // Event listeners para cerrar modal
    document.addEventListener('click', function(e) {
      const target = e.target as HTMLElement;
      if (target) {
        const modalClose = target.closest('[data-modal-close]');
        
        if (modalClose) {
          const modalId = modalClose.getAttribute('data-modal-close');
          if (modalId) {
            (window as any).closeModal(modalId);
          }
        }
      }
    });

    // Cerrar con tecla Escape
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        const openModal = document.querySelector('.modal-overlay.modal-open');
        if (openModal) {
          const modalId = openModal.getAttribute('data-modal-id');
          if (modalId) {
            (window as any).closeModal(modalId);
          }
        }
      }
    });

    // Verificar que las funciones est√©n disponibles
    console.log("üîß Funciones de modal disponibles:", {
      openModal: typeof (window as any).openModal,
      closeModal: typeof (window as any).closeModal
    });

    console.log(
      "üéâ Ecosistema de Soluciones configurado - Animaciones de entrada listas"
    );
  });
</script>

<style>
  /* üåê ECOSISTEMA DE SOLUCIONES - ESTILOS ELEGANTES Y ANIMACIONES */

  /* Estado inicial para animaciones de entrada */
  .soluciones-titulo {
    opacity: 0;
    transform: translateY(50px) scale(0.9);
    background-size: 200% 200%;
    animation: gradientShift 3s ease infinite;
  }

  .soluciones-subtitulo {
    opacity: 0;
    transform: translateY(30px);
  }

  /* Animaciones CSS fallback */
  .soluciones-titulo.animate {
    opacity: 1;
    transform: translateY(0) scale(1);
    transition: all 1s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  /* Efecto de gradiente animado para el t√≠tulo */
  @keyframes gradientShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  .soluciones-subtitulo.animate {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  /* Estado inicial para animaciones de entrada */
  .solution-card {
    opacity: 0;
    transform: scale(0.8) translateY(30px) rotate(10deg);
  }

  .connection-line {
    opacity: 0;
    stroke-dasharray: 500;
    stroke-dashoffset: 500;
  }

  .connection-dot {
    opacity: 0;
    transform: scale(0);
  }

  .bg-particle {
    opacity: 0;
    transform: scale(0);
  }

  /* Animaci√≥n avanzada de las l√≠neas con m√∫ltiples efectos */
  .connection-line.visible {
    animation: advancedFlow 6s ease-in-out infinite;
    filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.2));
    transition: all 0.3s ease;
  }

  /* Efecto de flujo avanzado con m√∫ltiples estados */
  @keyframes advancedFlow {
    0% {
      stroke: #d1d5db;
      stroke-width: 1.5;
      opacity: 0.6;
      stroke-dasharray: 5, 5;
      filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.2));
    }
    15% {
      stroke: #9ca3af;
      stroke-width: 2.5;
      opacity: 1;
      stroke-dasharray: 8, 2;
      filter: drop-shadow(0 0 2px rgba(156, 163, 175, 0.4));
    }
    30% {
      stroke: #6b7280;
      stroke-width: 2;
      opacity: 0.9;
      stroke-dasharray: 3, 7;
      filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.3));
    }
    45% {
      stroke: #9ca3af;
      stroke-width: 2.5;
      opacity: 1;
      stroke-dasharray: 6, 4;
      filter: drop-shadow(0 0 2px rgba(156, 163, 175, 0.4));
    }
    60% {
      stroke: #d1d5db;
      stroke-width: 1.5;
      opacity: 0.8;
      stroke-dasharray: 4, 6;
      filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.2));
    }
    75% {
      stroke: #9ca3af;
      stroke-width: 2;
      opacity: 0.9;
      stroke-dasharray: 7, 3;
      filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.3));
    }
    100% {
      stroke: #d1d5db;
      stroke-width: 1.5;
      opacity: 0.6;
      stroke-dasharray: 5, 5;
      filter: drop-shadow(0 0 1px rgba(156, 163, 175, 0.2));
    }
  }

  /* Variaciones de timing para cada l√≠nea */
  .line-1.visible {
    animation-delay: 0s;
  }
  .line-2.visible {
    animation-delay: -1s;
  }
  .line-3.visible {
    animation-delay: -2s;
  }
  .line-4.visible {
    animation-delay: -3s;
  }
  .line-5.visible {
    animation-delay: -4s;
  }
  .line-6.visible {
    animation-delay: -5s;
  }

  /* Efecto de ondulaci√≥n adicional para l√≠neas horizontales */
  .line-1.visible,
  .line-4.visible {
    animation:
      advancedFlow 6s ease-in-out infinite,
      waveEffect 8s ease-in-out infinite;
  }

  /* Efecto de ondulaci√≥n para l√≠neas diagonales */
  .line-2.visible,
  .line-3.visible,
  .line-5.visible,
  .line-6.visible {
    animation:
      advancedFlow 6s ease-in-out infinite,
      diagonalWave 7s ease-in-out infinite;
  }

  /* Efecto de onda horizontal */
  @keyframes waveEffect {
    0%,
    100% {
      transform: translateY(0px);
    }
    25% {
      transform: translateY(-1px);
    }
    75% {
      transform: translateY(1px);
    }
  }

  /* Efecto de onda diagonal */
  @keyframes diagonalWave {
    0%,
    100% {
      transform: translateX(0px) translateY(0px);
    }
    25% {
      transform: translateX(-1px) translateY(-1px);
    }
    75% {
      transform: translateX(1px) translateY(1px);
    }
  }

  /* Efecto de energ√≠a que fluye a trav√©s de las l√≠neas */
  .connection-line.visible::before {
    content: "";
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      90deg,
      transparent,
      rgba(156, 163, 175, 0.1),
      transparent
    );
    animation: energyFlow 4s linear infinite;
    pointer-events: none;
  }

  @keyframes energyFlow {
    0% {
      transform: translateX(-100%);
    }
    100% {
      transform: translateX(100%);
    }
  }

  /* Efecto de brillo sutil en hover */
  .connection-line.visible:hover {
    filter: drop-shadow(0 0 3px rgba(156, 163, 175, 0.6));
    transition: filter 0.3s ease;
  }

  /* Efecto de pulso y brillo para puntos de conexi√≥n */
  .connection-dot.visible {
    animation: pulseGlow 2s ease-in-out infinite;
  }

  @keyframes pulseGlow {
    0% {
      transform: scale(1);
      filter: drop-shadow(0 0 2px rgba(6, 43, 237, 0.3));
    }
    50% {
      transform: scale(1.2);
      filter: drop-shadow(0 0 6px rgba(6, 43, 237, 0.6));
    }
    100% {
      transform: scale(1);
      filter: drop-shadow(0 0 2px rgba(6, 43, 237, 0.3));
    }
  }

  /* Animaci√≥n constante de las part√≠culas */
  .bg-particle {
    animation: floatParticle 8s ease-in-out infinite;
  }

  @keyframes floatParticle {
    0%,
    100% {
      transform: translateY(0) translateX(0);
      opacity: 0.3;
    }
    25% {
      transform: translateY(-15px) translateX(10px);
      opacity: 0.6;
    }
    50% {
      transform: translateY(-5px) translateX(-5px);
      opacity: 0.4;
    }
    75% {
      transform: translateY(10px) translateX(15px);
      opacity: 0.7;
    }
  }

  /* Efectos hover mejorados - Colores de marca */
  .solution-card:hover {
    transform: translateY(-6px) scale(1.03);
    background: rgba(255, 255, 255, 0.95);
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
  }
  

  /* Card central con logo - Dise√±o profesional */
  .center-card {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .center-card:hover {
    transform: translate(-50%, -50%) scale(1.05);
    background: #050835;
  }

  /* Mejoras en las cards de soluciones - Efectos de marca */
  .solution-card {
    position: absolute;
    width: 11rem;
    height: 11rem;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(8px);
    border-radius: 50%;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 30;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
  }

  /* Fondo azul para las tarjetas con clase bg-[#062BED] */
  .solution-card.bg-\[\#062BED\] {
    background: #062BED !important;
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 10px 25px rgba(6, 43, 237, 0.3);
  }

  .solution-card:hover {
    background: rgba(255, 255, 255, 0.95);
    transform: translateY(-6px) scale(1.03);
    border-color: rgba(59, 130, 246, 0.5);
    box-shadow: 0 20px 40px rgba(59, 130, 246, 0.2);
  }

  .solution-card:active {
    transform: translateY(-3px) scale(1.01);
  }

  /* Hover espec√≠fico para tarjetas azules */
  .solution-card.bg-\[\#062BED\]:hover {
    background: #0519c7 !important;
    transform: translateY(-6px) scale(1.03);
    border-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 20px 40px rgba(6, 43, 237, 0.4);
  }

  .solution-card.bg-\[\#062BED\]:active {
    background: #0414a3 !important;
    transform: translateY(-3px) scale(1.01);
  }

  /* CARD 1: Protecci√≥n de la Experiencia Digital (arriba centro) */
  .card-1 {
    top: -1rem;
    left: 42.2%;
    transform: translateX(-50%);
    z-index: 40;
  }

  /* CARD 2: Conectividad Avanzada (arriba derecha) */
  .card-2 {
    top: 1rem;
    right: 18rem;
  }

  /* CARD 3: Cloud & Plataformas Digitales (abajo derecha) */
  .card-3 {
    bottom: 8.5rem;
    right: 18rem;
  }

  /* CARD 4: Data Center (abajo centro) */
  .card-4 {
    bottom: 6rem;
    left: 42.2%;
    transform: translateX(-50%);
    z-index: 40;
  }

  /* CARD 5: Gobierno, Riesgo y Cumplimiento (abajo izquierda) */
  .card-5 {
    bottom: 8.5rem;
    left: 18rem;
  }

  /* CARD 6: Confianza Digital y Protecci√≥n de Identidades (arriba izquierda) */
  .card-6 {
    top: 1rem;
    left: 18rem;
  }

  /* CARD 7: Protecci√≥n Avanzada Contra Amenazas (derecha centro) */
  .card-7 {
    top: 12rem;
    right: 11rem;
  }

  /* CARD 8: Tecnolog√≠as de Nueva Generaci√≥n (izquierda centro) */
  .card-8 {
    top: 12rem;
    left: 11rem;
  }

  /* Responsive mejorado - Tablet y dispositivos medianos */
  @media (max-width: 1024px) and (min-width: 769px) {
    .ecosystem-wrapper {
      height: 600px !important;
    }

    .solution-card {
      width: 140px !important;
      height: 140px !important;
      padding: 0.5rem !important;
    }

    .solution-card h4 {
      font-size: 0.75rem !important;
      line-height: 1.1 !important;
    }

    /* CARD 1: Protecci√≥n de la Experiencia Digital (arriba centro) */
    .card-1 {
      top: -3rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 2: Conectividad Avanzada (arriba derecha) */
    .card-2 {
      top: 2rem !important;
      right: 10rem !important;
    }

    /* CARD 3: Cloud & Plataformas Digitales (abajo derecha) */
    .card-3 {
      bottom: 8rem !important;
      right: 10rem !important;
    }

    /* CARD 4: Data Center (abajo centro) */
    .card-4 {
      bottom: 2rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 5: Gobierno, Riesgo y Cumplimiento (abajo izquierda) */
    .card-5 {
      bottom: 8rem !important;
      left: 10rem !important;
    }

    /* CARD 6: Confianza Digital y Protecci√≥n de Identidades (arriba izquierda) */
    .card-6 {
      top: 2rem !important;
      left: 10rem !important;
    }

    /* CARD 7: Protecci√≥n Avanzada Contra Amenazas (derecha centro) */
    .card-7 {
      top: 11rem !important;
      right: 7rem !important;
    }

    /* CARD 8: Tecnolog√≠as de Nueva Generaci√≥n (izquierda centro) */
    .card-8 {
      top: 11rem !important;
      left: 7rem !important;
    }
  }

  /* Responsive mejorado - Mobile */
  @media (max-width: 768px) {
    .ecosystem-wrapper {
      height: 700px !important;
    }

    .solution-card {
      width: 140px !important;
      height: 140px !important;
      padding: 0.5rem !important;
    }

    .solution-card .w-12 {
      width: 2.75rem !important;
      height: 2.75rem !important;
      margin-bottom: 0.5rem !important;
    }

    .solution-card h4 {
      font-size: 0.8rem !important;
      line-height: 1.2 !important;
    }

    /* CARD 1: Protecci√≥n de la Experiencia Digital (arriba centro) */
    .card-1 {
      top: 7rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 2: Conectividad Avanzada (arriba derecha) */
    .card-2 {
      top: 8rem !important;
      right: 4.5rem !important;
    }

    /* CARD 3: Cloud & Plataformas Digitales (abajo derecha) */
    .card-3 {
      bottom: 9rem !important;
      right: 4.5rem !important;
    }

    /* CARD 4: Data Center (abajo centro) */
    .card-4 {
      bottom: 7rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 5: Gobierno, Riesgo y Cumplimiento (abajo izquierda) */
    .card-5 {
      bottom: 9rem !important;
      left: 4.5rem !important;
    }

    /* CARD 6: Confianza Digital y Protecci√≥n de Identidades (arriba izquierda) */
    .card-6 {
      top: 8rem !important;
      left: 4.5rem !important;
    }

    /* CARD 7: Protecci√≥n Avanzada Contra Amenazas (derecha centro) */
    .card-7 {
      top: 17rem !important;
      right: 0rem !important;
    }

    /* CARD 8: Tecnolog√≠as de Nueva Generaci√≥n (izquierda centro) */
    .card-8 {
      top: 17rem !important;
      left: 0rem !important;
    }
  }

  /* Responsive mejorado - Mobile peque√±o */
  @media (max-width: 480px) {
    .ecosystem-wrapper {
      height: 600px !important;
    }

    .solution-card {
      width: 125px !important;
      height: 125px !important;
      padding: 0.25rem !important;
    }

    .solution-card .w-12 {
      width: 2.25rem !important;
      height: 2.25rem !important;
      margin-bottom: 0rem !important;
    }

    .solution-card h4 {
      font-size: 0.7rem !important;
      line-height: 1.15 !important;
    }

    /* CARD 1: Protecci√≥n de la Experiencia Digital (arriba centro) */
    .card-1 {
      top: 4rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 2: Conectividad Avanzada (arriba derecha) */
    .card-2 {
      top: 6.5rem !important;
      right: 0rem !important;
    }

    /* CARD 3: Cloud & Plataformas Digitales (abajo derecha) */
    .card-3 {
      bottom: 6.5rem !important;
      right: 0rem !important;
    }

    /* CARD 4: Data Center (abajo centro) */
    .card-4 {
      bottom: 4rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
    }

    /* CARD 5: Gobierno, Riesgo y Cumplimiento (abajo izquierda) */
    .card-5 {
      bottom: 6.5rem !important;
      left: 0rem !important;
    }

    /* CARD 6: Confianza Digital y Protecci√≥n de Identidades (arriba izquierda) */
    .card-6 {
      top: 14.8rem !important;
      left: 0rem !important;
    }

    /* CARD 7: Protecci√≥n Avanzada Contra Amenazas (derecha centro) */
    .card-7 {
      top: 14.8rem !important;
      right: 0rem !important;
    }

    /* CARD 8: Tecnolog√≠as de Nueva Generaci√≥n (izquierda centro) */
    .card-8 {
      top: 6.5rem !important;
      left: 0rem !important;
    }
  }
</style>
